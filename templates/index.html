<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stock Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
      color: #333;
    }

    body.dark-mode {
      background-color: #121212;
      color: #f4f4f4;
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 2em;
    }

    .page-title {
      text-align: center;
      font-size: 2em;
      margin-bottom: 1em;
    }

    .form-group {
      text-align: center;
      margin-bottom: 2em;
    }

    input[type="text"] {
      padding: 0.5em;
      width: 60%;
      max-width: 300px;
      margin-right: 0.5em;
    }

    button {
      padding: 0.5em 1em;
      cursor: pointer;
    }

    .stock-info {
      text-align: center;
      margin-bottom: 2em;
    }

    .range-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5em;
      margin-bottom: 1em;
    }

    .news-section {
      margin-top: 2em;
    }

    .news-article {
      border-bottom: 1px solid #ccc;
      padding: 1em 0;
    }

    .dark-mode .news-article {
      border-color: #555;
    }

    .arrow-bounce {
      font-size: 1.8em;
      margin-top: 0.3em;
      animation: bounce 1.2s infinite ease-in-out;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(6px);
      }
    }

    body.dark-mode #searchPrompt {
      color: #aaa;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="page-title">üìà Stock Tracker</div>

    <!-- Dark Mode Toggle -->
    <div style="text-align: center; margin: 1em 0;">
      <label for="darkModeToggle" style="cursor: pointer; user-select: none;">
        üåô Dark Mode
        <input type="checkbox" id="darkModeToggle" style="margin-left: 0.5em;">
      </label>
    </div>

    <div class="form-group">
      <form id="stockForm">
        <input type="text" id="symbolInput" placeholder="Enter Stock Symbol (e.g. AAPL)">
        <button type="submit">Search</button>
      </form>
    </div>

    <div class="stock-info" id="stock-info"></div>

    <div class="range-buttons" id="range-buttons"></div>

    <!-- Animated Callout -->
    <div id="searchPrompt" style="margin-top: 1.2em; text-align: center;">
      <div style="color: #555; font-size: 1em;">Search a stock ticker above to begin</div>
      <div class="arrow-bounce">‚¨áÔ∏è</div>
    </div>

    <div id="chart"></div>

    <div class="news-section" id="news"></div>
  </div>

  <script>
    const form = document.getElementById('stockForm');
    const symbolInput = document.getElementById('symbolInput');
    const darkModeToggle = document.getElementById('darkModeToggle');

    // Handle dark mode toggle
    darkModeToggle.addEventListener('change', function () {
      document.body.classList.toggle('dark-mode', this.checked);
      localStorage.setItem('darkMode', this.checked);
    });

    // Load dark mode preference
    window.addEventListener('DOMContentLoaded', () => {
      const savedDarkMode = localStorage.getItem('darkMode') === 'true';
      darkModeToggle.checked = savedDarkMode;
      document.body.classList.toggle('dark-mode', savedDarkMode);
    });

    form.addEventListener('submit', e => {
      e.preventDefault();
      const symbol = symbolInput.value.trim();
      if (symbol) {
        fetchStockData(symbol);
        document.getElementById('searchPrompt').style.display = 'none';
      }
    });

    function fetchStockData(symbol) {
      // Example fetch (replace with your actual Flask route)
      fetch(`/stock/${symbol}`)
        .then(response => response.json())
        .then(data => {
          document.getElementById('stock-info').textContent = `${symbol.toUpperCase()}: $${data.price}`;
          // Optionally load chart and news here
        })
        .catch(error => console.error('Error fetching stock data:', error));
    }
  </script>
</body>
</html>
